openapi: 3.0.4
info:
  title: Favorite Game Gauntlet
  version: 0.9.0
paths:

  /auth/signup:
    post:
      operationId: signUp
      tags: [ Auth ]
      summary: Register a new user account
      description: |
        Creates a new user by providing a unique name, valid email address, and password.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignupUser'
      responses:
        '204':
          description: User account successfully created.
        '401':
          description: Invalid authentication data provided.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: A user with the given email or name already exists.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /auth/login:
    post:
      operationId: login
      tags: [ Auth ]
      summary: Log in an existing user
      description: |
        Authenticates a user using their name and password and returns an active session.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginUser'
      responses:
        '204':
          description: User successfully authenticated.
          headers:
            Set-Cookie:
              schema:
                type: string
              description: Session cookie
        '401':
          description: Incorrect name or password.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /auth/logout:
    post:
      operationId: logout
      tags: [ Auth ]
      summary: Log out the current user
      description: |
        Ends the active user session and invalidates authentication.
      responses:
        '204':
          description: User successfully logged out.
          headers:
            Set-Cookie:
              schema:
                type: string
              description: Session cookie
        '401':
          description: No active session found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /users/self/display-name:
    post:
      operationId: changeOwnDisplayName
      tags: [ Users ]
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Name'
      responses:
        '204':
          description: Success.
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    get:
      operationId: getOwnDisplayName
      tags: [ Users ]
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Name'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: DisplayName not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /users/infos:
    get:
      operationId: getUserInfos
      tags: [ Users ]
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfos'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /users/self/stats:
    get:
      operationId: getOwnStats
      tags: [ Users ]
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserStats'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /users/{login}/stats:
    get:
      operationId: getUserStats
      tags: [ Users ]
      parameters:
        - $ref: "#/components/parameters/UserLogin"
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserStats'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /users/{login}/territory-point-history:
    get:
      operationId: getUserTerritoryPointHistory
      tags: [ Users ]
      parameters:
        - $ref: "#/components/parameters/UserLogin"
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TerritoryPointChanges'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /users/{login}/free-point-history:
    get:
      operationId: getUserFreePointHistory
      tags: [ Users ]
      parameters:
        - $ref: "#/components/parameters/UserLogin"
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FreePointChanges'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /users/{login}/wishlist-games:
    get:
      operationId: getUserWishlistGames
      tags: [ Users ]
      parameters:
        - $ref: "#/components/parameters/UserLogin"
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WishlistGames'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /users/{login}/game-history:
    get:
      operationId: getUserGameHistory
      tags: [ Users ]
      parameters:
        - $ref: "#/components/parameters/UserLogin"
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Games'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /users/{login}/wheel-effect-history:
    get:
      operationId: getUserWheelEffectHistory
      tags: [ Users ]
      parameters:
        - $ref: "#/components/parameters/UserLogin"
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RolledWheelEffects'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: User not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /games/wishlist:
    post:
      operationId: addWishlistGame
      tags: [ Games ]
      summary: Add game wishlist
      description: |
        Add the game you want to play here.<br>
        You can use another command to get a random game from this list.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WishlistGame'
      responses:
        '204':
          description: Wishlist game was saved successfully.
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    get:
      operationId: getWishlistGames
      tags: [ Games ]
      summary: Get game wishlist
      description: |
        You can see the games you might get here.<br>
        You can use another command to get a random game from this list.
      responses:
        '200':
          description: Wishlist games were retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WishlistGames'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /games/roll:
    post:
      operationId: makeGameRoll
      tags: [ Games ]
      summary: Select a random game from the wishlist
      description: |
        Select a random game from your unplayed list.<br>
        The selected game will become the current game.<br>
        You will then be able to start the timer.
      responses:
        '200':
          description: A game roll was performed and the selected game returned.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Game'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: No unplayed games available for rolling.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Game roll not allowed due to current game state.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /games/current:
    get:
      operationId: getCurrentGame
      tags: [ Games ]
      summary: Get the current game
      description: |
        You can find out information and status of the current game.
      responses:
        '200':
          description: The userâ€™s current game was retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Game'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Current game not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /games/current/finish:
    post:
      operationId: finishCurrentGame
      tags: [ Games ]
      summary: Complete the current game
      description: |
        You can complete the current game if you have completed it according to the FGG rules.<br>
        When you complete the game, you will receive a bonus that depends on the number of hours spent playing.
      responses:
        '204':
          description: Current game was marked as finished successfully.
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: No current game available to finish.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Game finishing not allowed due to lack of completed timers for the game.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /games/current/cancel:
    post:
      operationId: cancelCurrentGame
      tags: [ Games ]
      summary: Cancel the current game
      description: |
        You can cancel the current game if you do not intend to complete it for any reason.<br>
        If you cancel a game, you will receive a fixed penalty.
      responses:
        '204':
          description: Current game was marked as cancelled successfully.
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: No current game available to cancel.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /games/history:
    get:
      operationId: getGameHistory
      tags: [ Games ]
      summary: Get a list of all games played
      description: |
        You can get a complete list of all the games that were randomly selected from your wishlist,<br>
        as well as all the information about them.
      responses:
        '200':
          description: Game history was retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Games'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'


  /timers/current:
    get:
      operationId: getCurrentTimer
      tags: [ Timers ]
      summary: Get a timer for the current game
      description: |
        If you don't have a timer, one will be created.<br>
        If you already have one, you'll receive it.
      responses:
        '200':
          description: The current timer was retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Timer'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: No active timer found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /timers/current/start:
    post:
      operationId: startCurrentTimer
      tags: [ Timers ]
      summary: Start or continue the current timer
      description: |
        Start or continue the timer from the current game.<br>
        If the timer is already running, nothing will happen.
      responses:
        '200':
          description: Timer was started or resumed successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Timer'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: No timer available to start.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Timer cannot be started due to incorrect state.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /timers/current/pause:
    post:
      operationId: pauseCurrentTimer
      tags: [ Timers ]
      summary: Pause the current timer
      description: |
        Pause the timer from the current game.<br>
        If the timer is already paused, nothing will happen.
      responses:
        '200':
          description: Timer was paused successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Timer'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: No timer available to pause.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Timer cannot be paused due to incorrect state.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /wheel-effects/history:
    get:
      operationId: getWheelEffectHistory
      tags: [ WheelEffects ]
      summary: Get a list of all effect rolls
      description: |
        You can get a list of all effect rolls that have been received or rolled,
        as well as all the information about them.
      responses:
        '200':
          description: Effect history retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RolledWheelEffects'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /wheel-effects/available:
    get:
      operationId: getAvailableWheelEffects
      tags: [ WheelEffects ]
      summary: Get a list of effects available for rolling
      description: |
        You can get a list of effects that are available to drop using the throw effects command.
      responses:
        '200':
          description: List of available effects successfully retrieved.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WheelEffects'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /wheel-effects/available/roll:
    post:
      operationId: makeAvailableWheelEffectRoll
      tags: [ WheelEffects ]
      summary: Make the roll of the effect available
      description: |
        Allows you to obtain a random effect from those that haven't dropped yet.<br>
        A list of available effects can be obtained using another command.
      responses:
        '200':
          description: Effect roll performed successfully and returned.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RolledWheelEffects'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: No available effects to roll.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Effect roll not allowed due to current game or timer state.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /wheel-effects/available/roll/apply:
    post:
      operationId: applyAvailableWheelEffectRoll
      tags: [ WheelEffects ]
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserInfos'
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/UserLogin'
                    - $ref: '#/components/schemas/FreePointChange'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: No available effects to roll.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Effect roll not allowed due to current game or timer state.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /points/territory-point-history:
    get:
      operationId: getTerritoryPointHistory
      tags: [ Points ]
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TerritoryPointChanges'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /points/free-point-history:
    get:
      operationId: getFreePointHistory
      tags: [ Points ]
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FreePointChanges'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /points/territory-points:
    post:
      operationId: changeTerritoryPoints
      tags: [ Points ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                changeSource:
                  type: string
                changeValue:
                  type: integer
                  format: int
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TerritoryPointChange'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: The points can't change on this value.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /points/free-points:
    post:
      operationId: changeFreePoints
      tags: [ Points ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                changeSource:
                  type: string
                changeValue:
                  type: integer
                  format: int
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FreePointChange'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: The points can't change on this value.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /points/territory-hours:
    post:
      operationId: changeTerritoryHours
      tags: [ Points ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                changeValue:
                  type: integer
                  format: int
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Points'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: The points can't change on this value.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /points/experience-points:
    post:
      operationId: changeExperiencePoints
      tags: [ Points ]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                changeValue:
                  type: integer
                  format: int
      responses:
        '200':
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Points'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: The points can't change on this value.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /games/unplayed:
    post:
      operationId: addUnplayedGames
      tags: [ Games ]
      deprecated: true
      summary: Add game wishlist
      description: |
        Add the games you want to play here.<br>
        You can use another command to get a random game from this list.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WishlistGames'
      responses:
        '200':
          description: Unplayed games were saved successfully.
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    get:
      operationId: getUnplayedGames
      tags: [ Games ]
      deprecated: true
      summary: Get game wishlist
      description: |
        You can see the games you might get here.<br>
        You can use another command to get a random game from this list.
      responses:
        '200':
          description: Unplayed games were retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WishlistGames'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /effects/history:
    get:
      operationId: getEffectHistory
      tags: [ Effects ]
      deprecated: true
      summary: Get a list of all effect rolls
      description: |
        You can get a list of all effect rolls that have been received or rolled,
        as well as all the information about them.
      responses:
        '200':
          description: Effect history retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RolledWheelEffects'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /effects/roll:
    post:
      operationId: makeEffectRoll
      tags: [ Effects ]
      deprecated: true
      summary: Make the roll of the effect available
      description: |
        Allows you to obtain a random effect from those that haven't dropped yet.<br>
        A list of available effects can be obtained using another command.
      responses:
        '200':
          description: Effect roll performed successfully and returned.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RolledWheelEffects'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: No available effects to roll.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Effect roll not allowed due to current game or timer state.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /effects/available:
    get:
      operationId: getAvailableEffects
      tags: [ Effects ]
      deprecated: true
      summary: Get a list of effects available for rolling
      description: |
        You can get a list of effects that are available to drop using the throw effects command.
      responses:
        '200':
          description: List of available effects successfully retrieved.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WheelEffects'
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



  /effects/available/count:
    get:
      operationId: getAvailableEffectsCount
      tags: [ Effects ]
      deprecated: true
      summary: Get the number of effects available for rolling
      description: |
        Returns the total number of effects that are currently available for rolling.<br>
        This value represents how many effects can still be obtained via the roll command.
      responses:
        '200':
          description: Number of available effects successfully retrieved.
          content:
            application/json:
              schema:
                type: integer
                format: int
        '401':
          description: Authentication required.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Available effects data not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'



components:

  parameters:
    UserLogin:
      name: login
      in: path
      required: true
      schema:
        $ref: '#/components/schemas/UserLogin'

  schemas:
    Id:
      type: integer
      format: int

    UserLogin:
      type: string
      pattern: '^\w+$'
      minLength: 3
      maxLength: 35

    Name:
      type: string
      pattern: '^.+$'
      minLength: 1
      maxLength: 70

    UserPassword:
      type: string
      pattern: '^(?=.*\w)(?=.*\d).+$'
      minLength: 8
      maxLength: 35

    UserEmail:
      type: string
      pattern: '^[\w\d._%+-]+@[\w\d.-]+\.[\w]{2,}$'
      minLength: 6
      maxLength: 35

    Duration:
      type: string
      format: duration
      example: PT2h10m5s
      description: The duration notation as defined by ISO 8601

    Points:
      type: integer
      format: int
      minimum: 0

    Error:
      type: object
      properties:
        code:
          type: string
        message:
          type: string
      required: [ code, message ]



    SignupUser:
      type: object
      properties:
        login:
          $ref: '#/components/schemas/UserLogin'
        email:
          $ref: '#/components/schemas/UserEmail'
        password:
          $ref: '#/components/schemas/UserPassword'
      required: [ login, email, password ]

    LoginUser:
      type: object
      properties:
        login:
          $ref: '#/components/schemas/UserLogin'
        password:
          $ref: '#/components/schemas/UserPassword'
      required: [ login, password ]

    UserStats:
      type: object
      properties:
        territoryPoints:
          $ref: '#/components/schemas/Points'
        freePoints:
          $ref: '#/components/schemas/Points'
        availableRolls:
          $ref: '#/components/schemas/Points'
        territoryHours:
          $ref: '#/components/schemas/Points'
        experiencePoints:
          $ref: '#/components/schemas/Points'
      required: [ territoryPoints, freePoints, availableRolls ]

    UserInfo:
      allOf:
        - type: object
          properties:
            login:
              $ref: '#/components/schemas/UserLogin'
            displayName:
              $ref: '#/components/schemas/Name'
          required: [ displayName ]
        - $ref: '#/components/schemas/UserStats'

    UserInfos:
      type: array
      items:
        $ref: '#/components/schemas/UserInfo'

    WishlistGame:
      type: object
      properties:
        name:
          $ref: '#/components/schemas/Name'
      required: [ name ]

    WishlistGames:
      type: array
      items:
        $ref: '#/components/schemas/WishlistGame'

    Game:
      type: object
      properties:
        name:
          $ref: '#/components/schemas/Name'
        state:
          type: string
          enum: [ 'started', 'finished', 'cancelled' ]
        timeSpent:
          $ref: '#/components/schemas/Duration'
        finishDate:
          type: string
          format: date-time
      required: [ name, state, timeSpent ]

    Games:
      type: array
      items:
        $ref: '#/components/schemas/Game'

    Timer:
      type: object
      properties:
        state:
          type: string
          enum: [ 'created', 'running', 'paused', 'finished' ]
        remainingTime:
          $ref: '#/components/schemas/Duration'
        duration:
          $ref: '#/components/schemas/Duration'
        lastActionDate:
          type: string
          format: date-time
      required: [ state, remainingTime, duration, lastActionDate ]

    WheelEffect:
      type: object
      properties:
        name:
          $ref: '#/components/schemas/Name'
        description:
          type: string
      required: [ name ]

    WheelEffects:
      type: array
      items:
        $ref: '#/components/schemas/WheelEffect'

    RolledWheelEffect:
      allOf:
        - $ref: '#/components/schemas/WheelEffect'
        - type: object
          properties:
            position:
              type: integer
              format: int
            rollDate:
              type: string
              format: date-time
          required: [ rollDate ]

    RolledWheelEffects:
      type: array
      items:
        $ref: '#/components/schemas/RolledWheelEffect'

    VictoryPointChange:
      type: object
      properties:
        changeSource:
          type: string
        changeValue:
          type: integer
          format: int
        actualChangeValue:
          type: integer
          format: int
        finalValue:
          $ref: '#/components/schemas/Points'
        changeDate:
          type: string
          format: date-time
      required: [ changeSource, changeValue, finalValue, changeDate ]

    TerritoryPointChange:
      allOf:
        - $ref: '#/components/schemas/VictoryPointChange'
        - type: object
          properties:
            changeSource:
              enum: [ 'territory-obtaining', 'territory-loss', 'other' ]

    TerritoryPointChanges:
      type: array
      items:
        $ref: '#/components/schemas/TerritoryPointChange'

    FreePointChange:
      allOf:
        - $ref: '#/components/schemas/VictoryPointChange'
        - type: object
          properties:
            changeSource:
              enum: [ 'own-wheel-effect', 'other-wheel-effect', 'quest', 'base-teleport', 'sandstorm', 'other' ]
            wheelEffectName:
              $ref: '#/components/schemas/Name'

    FreePointChanges:
      type: array
      items:
        $ref: '#/components/schemas/FreePointChange'
