openapi: 3.0.4
info:
  title: Favorite Game Gauntlet
  version: 0.10.0
paths:
  /points/{login}/info:
    get:
      operationId: getUserPointInfo
      tags:
        - Points
      parameters:
        - $ref: '#/components/parameters/Login'
      responses:
        '200':
          $ref: '#/components/responses/PointInfoResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '404':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
  /points/all/info:
    get:
      operationId: getAllPointInfo
      tags:
        - Points
      responses:
        '200':
          $ref: '#/components/responses/PointInfoByLoginsResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '404':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
  /points/{login}/territory-points:
    post:
      operationId: changeUserTerritoryPoints
      tags:
        - Points
      parameters:
        - $ref: '#/components/parameters/Login'
      requestBody:
        $ref: '#/components/requestBodies/PointChangeRequest'
      responses:
        '200':
          $ref: '#/components/responses/TerritoryPointChangeResultsResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '409':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
    get:
      operationId: getUserTerritoryPoints
      tags:
        - Points
      parameters:
        - $ref: '#/components/parameters/Login'
      responses:
        '200':
          $ref: '#/components/responses/PointsResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
  /points/{login}/territory-points/history:
    get:
      operationId: getUserTerritoryPointHistory
      tags:
        - Points
      parameters:
        - $ref: '#/components/parameters/Login'
      responses:
        '200':
          $ref: '#/components/responses/TerritoryPointChangeResultsResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '404':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
  /points/free-points:
    post:
      operationId: changeFreePoints
      tags:
        - Points
      requestBody:
        $ref: '#/components/requestBodies/PointChangeRequest'
      responses:
        '200':
          $ref: '#/components/responses/FreePointChangeResultsResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '409':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
    get:
      operationId: getFreePoints
      tags:
        - Points
      responses:
        '200':
          $ref: '#/components/responses/PointsResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
  /points/{login}/free-points/history:
    get:
      operationId: getUserFreePointHistory
      tags:
        - Points
      parameters:
        - $ref: '#/components/parameters/Login'
      responses:
        '200':
          $ref: '#/components/responses/FreePointChangeResultsResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '404':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
  /points/experience-points:
    post:
      operationId: changeExperiencePoints
      tags:
        - Points
      requestBody:
        $ref: '#/components/requestBodies/PointChangeRequest'
      responses:
        '200':
          $ref: '#/components/responses/PointChangeResultResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '409':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
    get:
      operationId: getExperiencePoints
      tags:
        - Points
      responses:
        '200':
          $ref: '#/components/responses/PointsResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
  /points/territory-hours:
    post:
      operationId: changeTerritoryHours
      tags:
        - Points
      requestBody:
        $ref: '#/components/requestBodies/PointChangeRequest'
      responses:
        '200':
          $ref: '#/components/responses/PointChangeResultResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '409':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
    get:
      operationId: getTerritoryHours
      tags:
        - Points
      responses:
        '200':
          $ref: '#/components/responses/PointsResponse'
        '401':
          $ref: '#/components/responses/ErrorResponse'
        '500':
          $ref: '#/components/responses/ErrorResponse'
components:
  schemas:
    Login:
      type: string
      pattern: ^\w+$
      minLength: 3
      maxLength: 35
    Points:
      type: integer
      format: int
      minimum: 0
    PointInfo:
      type: object
      properties:
        territoryPoints:
          $ref: '#/components/schemas/Points'
        freePoints:
          $ref: '#/components/schemas/Points'
        availableRolls:
          $ref: '#/components/schemas/Points'
        territoryHours:
          $ref: '#/components/schemas/Points'
        experiencePoints:
          $ref: '#/components/schemas/Points'
      required:
        - territoryPoints
        - freePoints
        - availableRolls
        - territoryHours
        - experiencePoints
    Error:
      type: object
      properties:
        code:
          type: string
        message:
          type: string
      required:
        - code
        - message
    PointInfoByLogins:
      type: array
      items:
        type: object
        properties:
          login:
            $ref: '#/components/schemas/Login'
          pointInfo:
            $ref: '#/components/schemas/PointInfo'
    PointChange:
      type: object
      properties:
        changeSource:
          type: string
        desiredChangeValue:
          type: integer
          format: int
    PointChangeResult:
      allOf:
        - $ref: '#/components/schemas/PointChange'
        - type: object
          properties:
            actualChangeValue:
              type: integer
              format: int
            finalValue:
              $ref: '#/components/schemas/Points'
            changeDate:
              type: string
              format: date-time
          required:
            - actualChangeValue
            - finalValue
            - changeDate
    TerritoryPointChangeResult:
      allOf:
        - $ref: '#/components/schemas/PointChangeResult'
        - type: object
          properties:
            changeSource:
              enum:
                - territory-obtaining
                - territory-loss
                - other
    TerritoryPointChangeResults:
      type: array
      items:
        $ref: '#/components/schemas/TerritoryPointChangeResult'
    Name:
      type: string
      pattern: ^.+$
      minLength: 1
      maxLength: 70
    FreePointChangeResult:
      allOf:
        - $ref: '#/components/schemas/PointChangeResult'
        - type: object
          properties:
            changeSource:
              enum:
                - own-wheel-effect
                - other-wheel-effect
                - quest
                - base-teleport
                - sandstorm
                - other
            wheelEffectName:
              $ref: '#/components/schemas/Name'
    FreePointChangeResults:
      type: array
      items:
        $ref: '#/components/schemas/FreePointChangeResult'
  parameters:
    Login:
      name: login
      in: path
      required: true
      schema:
        $ref: '#/components/schemas/Login'
  responses:
    PointInfoResponse:
      description: Success.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PointInfo'
    ErrorResponse:
      description: Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    PointInfoByLoginsResponse:
      description: Success.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PointInfoByLogins'
    PointsResponse:
      description: Success.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Points'
    TerritoryPointChangeResultsResponse:
      description: Success.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TerritoryPointChangeResults'
    FreePointChangeResultsResponse:
      description: Success.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/FreePointChangeResults'
    PointChangeResultResponse:
      description: Success.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PointChangeResult'
  requestBodies:
    PointChangeRequest:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PointChange'
